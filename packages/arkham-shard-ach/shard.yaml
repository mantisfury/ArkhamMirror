# ACH Shard - Analysis of Competing Hypotheses
# Production Manifest v1.0 - Reference Implementation
# Compliant with shard_manifest_schema_prod.md

name: ach
version: "0.1.0"
description: Analysis of Competing Hypotheses matrix for intelligence analysis
entry_point: arkham_shard_ach:ACHShard
api_prefix: /api/ach
requires_frame: ">=0.1.0"

# Navigation - Shell integration
navigation:
  category: Analysis
  order: 30                   # Analysis category: 30-39
  icon: Scale
  label: ACH Analysis
  route: /ach
  badge_endpoint: /api/ach/matrices/count
  badge_type: count
  sub_routes:
    - id: matrices
      label: All Matrices
      route: /ach/matrices
      icon: List
    - id: new
      label: New Analysis
      route: /ach/new
      icon: Plus

# Dependencies - Frame service names
dependencies:
  services:
    - database            # Matrix and evidence persistence
    - events              # Event publishing
  optional:
    - llm                 # Devil's advocate mode, AI suggestions
    - vectors             # Evidence similarity search
  shards: []              # No shard dependencies (required empty)

# Capabilities - Standard capability names
capabilities:
  - hypothesis_management
  - evidence_management
  - consistency_scoring
  - devils_advocate
  - report_generation
  - data_export

# Events - Format: {shard}.{entity}.{action}
events:
  publishes:
    - ach.matrix.created
    - ach.matrix.updated
    - ach.matrix.deleted
    - ach.hypothesis.added
    - ach.hypothesis.removed
    - ach.evidence.added
    - ach.evidence.removed
    - ach.rating.updated
    - ach.analysis.completed
  subscribes:
    - llm.analysis.completed
    - document.processed      # Link new documents as evidence

# State Management
state:
  strategy: url
  url_params:
    - matrixId            # Active matrix ID
    - hypothesisId        # Selected hypothesis
    - tab                 # Active tab (matrix, evidence, analysis)
    - view                # View mode (grid, list, summary)
  local_keys:
    - matrix_zoom         # Zoom level preference
    - show_tooltips       # Tooltip visibility

# UI Configuration - Custom UI (not generic list)
ui:
  has_custom_ui: true
