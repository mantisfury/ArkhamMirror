# =============================================================================
# SHATTERED Environment Configuration
# =============================================================================
#
# Copy this file to .env and customize:
#   cp .env.example .env
#
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------

# Port for the application (API + UI served together)
APP_PORT=8100

# -----------------------------------------------------------------------------
# CORS Configuration (Security)
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins. Leave empty for development defaults.
# For production, set to your actual domain(s):
# CORS_ORIGINS=https://your-domain.com,https://app.your-domain.com

# -----------------------------------------------------------------------------
# Rate Limiting (Security)
# -----------------------------------------------------------------------------
# Configure API rate limits. Uses Redis if available, otherwise in-memory.
# Format: "requests/period" where period is second, minute, hour, or day
# RATE_LIMIT_DEFAULT=100/minute
# RATE_LIMIT_UPLOAD=20/minute
# RATE_LIMIT_AUTH=10/minute

# -----------------------------------------------------------------------------
# Authentication (REQUIRED for production)
# -----------------------------------------------------------------------------
# Generate a secret key with: python -c "import secrets; print(secrets.token_urlsafe(32))"
AUTH_SECRET_KEY=CHANGE-ME-generate-a-secure-random-key

# JWT token lifetime in seconds (default: 3600 = 1 hour)
JWT_LIFETIME_SECONDS=3600

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------

POSTGRES_USER=arkham
POSTGRES_PASSWORD=arkhampass
POSTGRES_DB=arkhamdb

# -----------------------------------------------------------------------------
# LLM Configuration (Optional)
# -----------------------------------------------------------------------------
# SHATTERED works without an LLM - AI features will be disabled.
# Choose ONE of the following configurations:

# Option 1: Local LLM (LM Studio, Ollama, etc)
# LLM_ENDPOINT=http://host.docker.internal:1234/v1
# LM_STUDIO_URL=http://host.docker.internal:1234/v1

# Option 2: OpenRouter (access to many models)
# LLM_ENDPOINT=https://openrouter.ai/api/v1
# LLM_API_KEY=sk-or-v1-your-key-here

# Option 3: OpenAI
# LLM_ENDPOINT=https://api.openai.com/v1
# LLM_API_KEY=sk-your-openai-key

# Option 4: Anthropic (requires adapter)
# LLM_ENDPOINT=https://api.anthropic.com/v1
# LLM_API_KEY=sk-ant-your-key

# -----------------------------------------------------------------------------
# Vision Language Model for OCR (Optional)
# -----------------------------------------------------------------------------
# Used for intelligent OCR of handwritten text, complex layouts, etc.
# Falls back to PaddleOCR if not configured.

# Option 1: Local VLM (LM Studio with Qwen-VL, etc)
# VLM_ENDPOINT=http://host.docker.internal:1234/v1
# VLM_MODEL=qwen2.5-vl-7b-instruct

# Option 2: OpenRouter (GPT-4o, Claude, Gemini vision)
# VLM_ENDPOINT=https://openrouter.ai/api/v1
# VLM_MODEL=openai/gpt-4o
# VLM_API_KEY=sk-or-v1-your-key  # Or uses LLM_API_KEY if not set

# Option 3: OpenAI directly
# VLM_ENDPOINT=https://api.openai.com/v1
# VLM_MODEL=gpt-4o
# VLM_API_KEY=sk-your-openai-key  # Or uses LLM_API_KEY if not set

# -----------------------------------------------------------------------------
# Optional: Vector Store (Qdrant)
# -----------------------------------------------------------------------------
# Qdrant is included in docker-compose and auto-configured.
# Only set if using an external Qdrant instance:
# QDRANT_URL=http://your-qdrant-host:6333

# -----------------------------------------------------------------------------
# Optional: Redis (Job Queue)
# -----------------------------------------------------------------------------
# Redis is included in docker-compose and auto-configured.
# Only set if using an external Redis instance:
# REDIS_URL=redis://your-redis-host:6379

# -----------------------------------------------------------------------------
# Production HTTPS (Traefik) - Optional
# -----------------------------------------------------------------------------
# These settings are used when deploying with docker-compose.traefik.yml
# for production HTTPS support with automatic Let's Encrypt certificates.
#
# Usage:
#   docker compose -f docker-compose.yml -f docker-compose.traefik.yml up -d
#
# Setup:
#   1. Point your domain DNS to this server's IP
#   2. Create certificate storage: touch traefik/acme.json && chmod 600 traefik/acme.json
#   3. Set DOMAIN and ACME_EMAIL below
#   4. Start with the traefik overlay command above

# Your domain name (required for HTTPS)
# DOMAIN=shattered.example.com

# Email for Let's Encrypt certificate notifications (required)
# ACME_EMAIL=admin@example.com

# Enable Traefik dashboard at traefik.${DOMAIN} (optional, default: false)
# TRAEFIK_DASHBOARD=true

# Traefik dashboard authentication (htpasswd format)
# Generate with: htpasswd -nb admin your-password
# TRAEFIK_DASHBOARD_AUTH=admin:$apr1$xyz...
